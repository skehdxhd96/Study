# *<h2>REST</h2>*

>>모바일 시대가 도래하면서 WEB분야의 가장 큰 변화를 꼽으라면 역시 '서버역할의 변화'이다.<br><br>
과거에는 서버의 데이터를 소비하는 주체가 '브라우저'라는 특정한 어플리케이션이었다면, 이제는 앱이나 웹을 통한 데이터 소비가 이루어진다.<br><br>
과거에는 브라우저 하나였기때문에 HTML이라는 형태로 데이터를 전달하면 되었지만, 이제는 **순수하게 '데이터' 그 자체를 요구**하게 되었다.<br><br>
즉, 서버의 역할은 순수하게 데이터에 대한 처리를 목적으로 하는 형태로 진화했다.<br><br>
<br>
이러한 변화속에서 웹의 의미도 조금 다르게 변화되었는데, <br><br>페이지를 이동하더라도 주소는 변화하지 않는 방식을 과거에 사용했다면,<br><br>
이제는 페이지를 이동하면 브라우저 내의 주소 역시도 변화하는 방식을 사용한다.<br>
<br>
REST는 Representational State Transfer의 약어로, **URI는 하나의 고유한 리소스를 대표하도록 설계된다 개념에 전송방식**을 결합한다.<br><br>
예를들어, /board/123은 board라는 주소의 123번이라는 고유한 의미를 가지도록 설계하고, 이에대한 처리는 GET, POST등의 방식을 통해 추가적인 정보를 통해서 결정한다.<br><br>
따라서 **REST방식은 "URL + GET/POST/UPDATE/DELETE/..."형식**으로 이루어진다고 볼수 있다.

#

spring은 @RequestMapping이나 @ResponseBody같이 REST방식의 데이터 처리를 위한 여러 종류의 어노테이션과 기능이 있다.

### *<h2>@RestController</h2>*
>> Controller가 Rest방식을 처리하기 위한 것임을 명시한다.
**REST방식에서 가장 먼저 기억해야 할 것은 서버에서 전송하는 것이 순수한 데이터라는 점**이다.<br><br>
기존 Controller에서 Model에 데이터를 담아 JSP등과 같은 뷰로 전달하는 방식이 아니므로 기존의 Controller와는 다르게 동작한다.<br><br>
@Controller의 모든 메서드의 리턴 타입을 기존과 다르게 처리하는데, **@Controller와 @ResponseBody를 이용해 동일한 결과를 만들 수 있다.**<br><br>
**@RestController는 메서드의 리턴 타입으로 사용자가 정의한 클래스 타입을 사용할 수 있고, 이를 JSON이나 XMl로 자동으로 처리할 수 있다.**<br><br>
<br>
**JSON은 구조가 있는 데이터를 "{}"을 묶고, 키와 값으로 구성하는 데이터 포맷이다. https://ko.wikipedia.org/wiki/JSON참조.<br>
<br>
**순수한 데이터를 원하는 형식이 Rest방식이고, 거기서 만들어진 어노테이션이 @RestController이므로 @RestController는 순수한 데이터를 반환하는 형태이다.**<br><br>
@Controller보다 다양한 포맷의 데이터를 전송할 수 있고, 주로 사용하는 데이터 형식은 JSON이나 XML이다. 경우에 따라서는 배열이나 리스트, 맵 타입의 객체를 전송하는 경우도 있다.<br><br>

### *<h2>@PathVariable</h2>*
>>Rest방식에서는 URL내에서 최대한 많은 정보를 담으려고 노력한다.<br><br>예전에는 abc?querySTring=123의 형태로 **파라미터를 이용해서 전달되던 데이터들이 REST방식에서는 경로의 일부로 차용되는 경우가 많다.**<br><br>
Spring MVC에서는 @PathVariable어노테이션을 이용해서 URL상에 경로의 일부를 파라미터로 사용할 수 있다.<br><br>
<br>
>ex) http://localhost:8080/sample/{bno}<br>
http://localhost:8080/sample/{sno}/page/{pno}<br>
<br>
위의 URL에서 {}로 처리된 부분은 컨트롤러의 메서드에서 변수로 처리가 가능하다.<br><br>
{}을 이용해서 변수명을 지정하고, 지정된 이름의 변숫값을 얻을 수 있다. 값을 얻을때는 int, double과 같은 기본 자료형은 얻을 수 없다.<br><br>
<br>
### *<h2>@RequestBody</h2>*
>>**전달된 요청(Request)의 내용(body)을 이용해서 해당 파라미터의 타입으로의 변환을 요구한다.**<br><br>
내부적으로 HttpMessageConverter타입의 객체들을 이용해서 다양한 포맷의 입력 데이터를 변환 할 수 있다.<br><br>
**요청에 의한 내용을 처리하기 때문에 POST형식으로 처리를 해주어야 한다.**<br><br>
**대부분의 경우 JSON데이터를 서버에 보내서 원하는 타입의 객체로 변환하는 용도로 사용한다.**<br><br>
그러나 원하는 포맷의 데이터를 보내고, 이를 해석해서 원하는 타입으로 사용하기도 한다.<br>

### *<h2>ResponseEntity타입</h2>*
>>Rest방식으로 호출하는 경우는 화면 자체가 아니라 데이터 자체를 전송하는 방식으로 처리되기 때문에, <br><br>**데이터를 요청하는 쪽에서는 정상적인 데이터인지 비정상적인 데이터인지를 구분할 수 있는 확실한 방법을 제공해야 한다.**<br><br>
**그래서 ResponseEntity는 데이터와 함께 HTTP Header의 상태 메세지를 같이 전달하는 용도로 사용한다.<br> <br>HTTP상태코드와 에러메세지 등을 함께 전달할수 있기 때문에 받는 입장에서 확실하게 결과를 알 수 있다.**

#

출처 : 코드로 배우는 스프링 프로젝트(남가람북스)/구멍가게코딩단